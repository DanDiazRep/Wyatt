function listOfMaterials(n){var t;switch(n){case"Link":t=Grade1_Link;break;case"I.O.U":t=Grade1_IOU;break;case"Circus Boy Plastics":t=Grade1_Circus;break;case"Vinyl":t=GradeV_Vinyl;break;case"Foundation 10":t=Grade2_Foundation_10;break;case"Key Largo":t=Grade2_Key_Largo;break;case"Patio":t=Grade2_Patio;break;case"Habersash":t=Grade3_Habersash;break;case"Echo":t=Grade3_Echo;break;case"Cosmopolitan":t=Grade3_Cosmopolitan;break;case"TBD":t=Empty_Grade;break;default:t=null}return t}function asyncDownload(n){Promise.all([BABYLON.SceneLoader.ImportMeshAsync(null,baseUrl,n,scene).then(function(n){n=n.meshes;asyncMesh=n;for(var t=1;t<n.length;t++)n[t].receiveShadows=!0,n[t].actionManager=new BABYLON.ActionManager(scene),n[t].actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(){},!1))}),]).then(()=>{for(var n=1;n<currentMesh.length;n++)currentMesh[n].name!="Seat"&&(currentMesh[n].name!="Base"||dataDB.Name.includes("Stool"))||(asyncMesh[n]._material=currentMesh[n]._material),asyncMesh[n].isVisible=currentMesh[n].isVisible,currentMesh[n].dispose();currentMesh=asyncMesh})}function detectmob(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}function priceCalculation(){for(var t,n=0;n<dataDB.Options.length;n++){for(t=0;t<dataDB.Options[n].Values.length;t++)dataDB.Options[n].Values[t].Active==!0&&(currentOptionPrice[n]=dataDB.Options[n].Values[t].Price);for(t=0;t<dataDB.Options[n].Values.length;t++)dataDB.Options[n].Values[t].Price-=currentOptionPrice[n];currentOptionsPDF=currentOptionPrice[n];totalPrice+=currentOptionPrice[n];productPrice.textContent="$ "+totalPrice+".00"}}function sendImg(n,t){var i=new XMLHttpRequest;i.open("POST","http://wyattapi.servexusinc.com/api/image",!0);i.setRequestHeader("Content-Type","application/json;charset=UTF-8");i.onreadystatechange=function(){i.readyState===4&&i.status===200&&t(!1,JSON.parse(i.responseText).Message);i.readyState===500&&t(!0,null)};i.send(JSON.stringify({data:n}))}function makeMyPDF(){vPortHeight=engine._gl.drawingBufferHeight;vPortWidth=engine._gl.drawingBufferWidth;var n=dataDB.PartNumber;setTimeout(function(){engine.setSize(1200,1920);scene.render();BABYLON.Tools.CreateScreenshotUsingRenderTarget(engine,photoCamera,{heigth:960,width:600},function(t){sendImg(t,function(t,i){dataDB.print=i;dataDB.totalPrice=totalPrice;dataDB.BackSize&&(dataDB.PartNumber=dataDB.PartNumber+"-"+backPartNumber.join(""));var r=new XMLHttpRequest;r.open("POST","http://wyattapi.servexusinc.com/api/pdf",!0);r.onreadystatechange=function(){r.readyState===4&&r.status===200&&($.LoadingOverlay("hide"),window.open("http://wyattapi.servexusinc.com/wwwroot/"+JSON.parse(r.responseText).Message,"_blank"));r.readyState===500&&$.LoadingOverlay("hide")};r.send(JSON.stringify(dataDB));dataDB.PartNumber=n})});engine.setSize(vPortWidth,vPortHeight)},500)}function takePhoto(){var n=new Image;n.src="/assets/layout/icons/Wyatt-Seating-Logo.png";console.log(n);vPortHeight=engine._gl.drawingBufferHeight;vPortWidth=engine._gl.drawingBufferWidth;engine.setSize(540,960);scene.render();BABYLON.Tools.CreateScreenshotUsingRenderTarget(engine,scene.activeCamera,{heigth:1920,width:1080,precision:2},function(t){watermark([t,n]).image(watermark.image.lowerRight(.5)).then(function(n){var t=document.createElement("a");t.download=dataDB.Name+".png";t.href=n.src;t.click()})});engine.setSize(vPortWidth,vPortHeight)}function materialStructureBuilding(n){var i,r,u,t,f;for($cardButton.text(dataDB.Options[n].Values[0].Name),i=$("<div>",{"class":"dropdown"}),$("#dropdownColGrades").append(i),r=$("<div>",{"class":"btn btn-info btn-sm dropdown-toggle",type:"button",id:"materialGrades","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),i.append(r),u=$("<div>",{"class":"dropdown-menu",id:"gradesDropdown","aria-labelledby":"dropdownMenuButton"}),i.append(u),t=0;t<dataDB.Options[n].Values.length;t++)f=$("<a>",{"class":"dropdown-item d-block",onClick:'materialCollectionCardBuildingAndEdition("'+n+","+dataDB.Options[n].Values[t].Name+'")',text:dataDB.Options[n].Values[t].Name,href:"#"}),u.append(f),dataDB.Options[n].Values[t].Active&&r.text(dataDB.Options[n].Values[t].Name);materialCollectionCardBuildingAndEdition(n+",")}function materialCollectionCardBuildingAndEdition(n){var v=n.split(","),t=v[0],a=v[1],u,s,h,e,i,c,f,r,o,l;if(document.getElementById("materialCollections")!=null){for(u=0;u<dataDB.Options[t].Values.length;u++)if(dataDB.Options[t].Values[u].Name==a)for(dataDB.Options[t].Values[u].Active=!0,$("#materialGrades").text(dataDB.Options[t].Values[u].Name),$("#materialCollections").text(dataDB.Options[t].Values[u].Collections[0].Name),e=$("#collectionDropdown"),e.empty(),i=0;i<dataDB.Options[t].Values[u].Collections.length;i++)c=$("<a>",{"class":"dropdown-item",href:"#",id:dataDB.Options[t].Values[u].Collections[i].Name,text:dataDB.Options[t].Values[u].Collections[i].Name,onClick:'collectionSet("'+dataDB.Options[t].Values[u].Collections[i].Name+'")'}),e.append(c),h=$("#materialCollections"),collection=dataDB.Options[t].Values[u].Collections[0].Name,dataDB.Options[t].Values[u].Collections[i].Active&&($("#materialCollections").text(dataDB.Options[t].Values[u].Collections[i].Name),collection=dataDB.Options[t].Values[u].Collections[i].Name);else dataDB.Options[t].Values[u].Active=!1;for(priceCalculation(),f=listOfMaterials(collection),$("#imagesContainer").empty(),$(".pagination").empty(),r=0;r<f.Content.length;r++)f.Content[r].Name&&(o=$("<div>",{"class":"material-item",id:f.Content[r].Name+"-material",onClick:'changeMaterial("'+collection+","+f.Content[r].Name+","+a+","+t+","+f.Content[r].ColorCode+","+f.Content[r].Code+'")'}),l=$("<img>",{src:"assets/layout/material thumbnails/"+a+"/"+collection+"/"+f.Content[r].Name+".jpg"}),o.append(l),$("#imagesContainer").append(o));$("#imagesContainer").pagify(6,".material-item")}else{for(s=$("<div>",{"class":"dropdown float-right",id:"dropdownCollections"}),$("#dropdownColMats").append(s),h=$("<div>",{"class":"btn btn-secondary dropdown-toggle",type:"button",id:"materialCollections","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}),s.append(h),e=$("<div>",{"class":"dropdown-menu",id:"collectionDropdown","aria-labelledby":"dropdownMenuButton"}),s.append(e),i=0;i<dataDB.Options[t].Values[0].Collections.length;i++)c=$("<a>",{"class":"dropdown-item d-block",href:"#",id:dataDB.Options[t].Values[0].Collections[i].Name,text:dataDB.Options[t].Values[0].Collections[i].Name,onClick:'collectionSet("'+dataDB.Options[t].Values[0].Collections[i].Name+'")'}),e.append(c),dataDB.Options[t].Values[0].Collections[i].Active&&(h.text(dataDB.Options[t].Values[0].Collections[i].Name),collection=dataDB.Options[t].Values[0].Collections[i].Name);for(f=listOfMaterials(collection),r=0;r<f.Content.length;r++)f.Content[r].Name&&(o=$("<div>",{"class":"material-item",id:f.Content[r].Name+"-material",onClick:'changeMaterial("'+collection+","+f.Content[r].Name+","+dataDB.Options[t].Values[0].Name+","+t+","+f.Content[r].ColorCode+","+f.Content[r].Code+'")'}),l=$("<img>",{src:"assets/layout/material thumbnails/Grade 1/"+collection+"/"+f.Content[r].Name+".jpg"}),o.append(l),$("#imagesContainer").append(o))}}function collectionSet(n){var s,e,t,i,f,u,r,o,h;for(collection=n,t=0;t<dataDB.Options.length;t++)for(i=0;i<dataDB.Options[t].Values.length;i++)if(dataDB.Options[t].Values[i].Code&&dataDB.Options[t].Values[i].Code.includes("grade"))for(f=0;f<dataDB.Options[t].Values[i].Collections.length;f++)dataDB.Options[t].Values[i].Collections[f].Name==n?(dataDB.Options[t].Values[i].Collections[f].Active=!0,$("#materialCollections").text(dataDB.Options[t].Values[i].Collections[f].Name),e=dataDB.Options[t].Values[i].Name,s=t):dataDB.Options[t].Values[i].Collections[f].Active=!1;for(u=listOfMaterials(collection),$(".pagination").empty(),$("#imagesContainer").empty(),r=0;r<u.Content.length;r++)u.Content[r].Name&&(o=$("<div>",{"class":"material-item",id:u.Content[r].Name+"-material",onClick:'changeMaterial("'+collection+","+u.Content[r].Name+","+e+","+s+","+u.Content[r].ColorCode+","+u.Content[r].Code+'")'}),h=$("<img>",{src:"assets/layout/material thumbnails/"+e+"/"+collection+"/"+u.Content[r].Name+".jpg"}),o.append(h),$("#imagesContainer").append(o)),$("#imagesContainer").pagify(6,".material-item")}function changeMaterial(n){for(var r,f,i,u=n.split(","),c=u[0],e=u[1],o=u[2],t=parseInt(u[3]),h=u[4],l=u[5],s=0;s<dataDB.Options[t].RelatedLayers.length;s++)for(r=1;r<currentMesh.length;r++)dataDB.Options[t].RelatedLayers[s]==currentMesh[r]._material.name&&(f="assets/materials/"+dataDB.Name.toLowerCase()+"/fabrics/"+o.toLowerCase()+"/"+c.toLowerCase()+"/"+e+"_"+dataDB.Options[t].RelatedLayers[s],o=="none"&&(f="assets/materials/"+dataDB.Name.toLowerCase()+"/fabrics/"+o.toLowerCase()+"/"+c.toLowerCase()+"/"+e+"_Back"),f&&(currentMesh[r]._material._albedoTexture=new BABYLON.Texture(f+"_Base_Color.png",scene),currentMesh[r]._material._alpha=e.includes("Mesh")?.74:1,currentMesh[r]._material._albedoTexture.vAng=-Math.PI,currentMesh[r]._material._albedoTexture.wAng=-Math.PI),h=="null"||h=="undefined"||(currentMesh[r]._material._albedoColor=new BABYLON.Color3.FromHexString(h)));for(i=0;i<dataDB.Options[t].Values.length;i++)dataDB.Options[t].Values[i].Code==e?(dataDB.Options[t].Values[i].Active=!0,backPartNumber[dataDB.Options[t].Depth-1]=dataDB.Options[t].Values[i].PartNumber):dataDB.Options[t].Values[i].Code.includes("grade")||(dataDB.Options[t].Values[i].Active=!1),dataDB.Options[t].Values[i].Name==o&&(dataDB.Options[t].Values[i].PartNumber=dataDB.Options[t].Values[i].Name.replace("Grade ","")+"-"+l)}function optionChangedOnFeature(n){var t=n.split(",");feature=t[0];option=t[1];option.includes("Grade")||option.includes("Color")?materialCollectionCardBuildingAndEdition():cardsResponseOnSelection();priceCalculation()}function cardsResponseOnSelection(){for(var c,r,o,e,u,f,s,t,h,i,n=0;n<dataDB.Options.length;n++){if(dataDB.Options[n].Name==feature)for(i=0;i<dataDB.Options[n].Values.length;i++)if(c=i,dataDB.Options[n].Values[i].Name==option){if(dataDB.Options[n].Values[i].Active=!0,dataDB.Options[n].Code.includes("back")&&dataDB.Options[n].Depth<dataDB.BackSize+1)for(r=0;r<dataDB.BackSize+1-dataDB.Options[n].Depth;r++){if(o=!0,r>=0)for(e=0;e<dataDB.Options[n+r].Values.length;e++)if(dataDB.Options[n+r].Values[e].Active){i=e;break}for(u=0;u<dataDB.Options[n+r+1].Values.length;u++)$.inArray(dataDB.Options[n+r+1].Values[u].Code,dataDB.Options[n+r].Values[i].Uses)>=0?(o?(dataDB.Options[n+r+1].Values[u].Active=!0,o=!1,$("#list-"+dataDB.Options[n+r+1].Values[u].Code+"-list").click(),$("#"+dataDB.Options[n+r+1].Values[u].Code+"-back-material").click()):dataDB.Options[n+r+1].Values[u].Active=!1,dataDB.Options[n+r+1].Name.includes("Color")?$("#"+dataDB.Options[n+r+1].Values[u].Code+"-back-material").show():$("#list-"+dataDB.Options[n+r+1].Values[u].Code+"-list").show()):(dataDB.Options[n+r+1].Values[u].Active=!1,dataDB.Options[n+r+1].Name.includes("Color")?$("#"+dataDB.Options[n+r+1].Values[u].Code+"-back-material").hide():$("#list-"+dataDB.Options[n+r+1].Values[u].Code+"-list").hide())}for(i=c,f=0;f<dataDB.Options[n].Values[i].Layers.length;f++)for(s=!1,dataDB.Options[n].Values[i].Layers[f].hasOwnProperty("MaterialFile")&&dataDB.Options[n].Values[i].Layers[f].MaterialFile!=null&&(s=!0),feature=="Back"&&(highBackOn=!1,dataDB.Options[n].Values[i].Name=="High-Back"&&feature=="Back"&&(highBackOn=!0)),feature=="Arm"&&(loopOn=!1,dataDB.Options[n].Values[i].Name.includes("loop arms")&&feature=="Arm"&&(loopOn=!0)),t=0;t<currentMesh.length;t++)dataDB.Options[n].Values[i].Layers[f].Layer==currentMesh[t].name&&(s&&(h="assets/materials"+dataDB.Options[n].Values[i].Layers[f].MaterialFile+"_",currentMesh[t]._material._albedoTexture=new BABYLON.Texture(h+dataDB.Options[n].Values[i].Name+"_Base_Color.png",scene),dataDB.Options[n].Values[i].Name.includes("Nylon")&&currentMesh[t].material.name=="Base"&&(currentMesh[t]._material._metallicTexture=null,currentMesh[t]._material.roughness=1,currentMesh[t]._material.metallic=0,currentMesh[t]._material._disableBumpMap=!0),dataDB.Options[n].Values[i].Name.includes("Aluminum")&&currentMesh[t].material.name=="Base"&&(currentMesh[t]._material._metallicTexture=new BABYLON.Texture(h+dataDB.Options[n].Values[i].Name+"_Metallic.png",scene),currentMesh[t]._material.roughness=.1,currentMesh[t]._material.metallic=1,currentMesh[t]._material._metallicTexture.vAng=-Math.PI,currentMesh[t]._material._metallicTexture.wAng=-Math.PI,currentMesh[t]._material._disableBumpMap=!0),currentMesh[t]._material._albedoTexture.vAng=-Math.PI,currentMesh[t]._material._albedoTexture.wAng=-Math.PI),currentMesh[t].isVisible=dataDB.Options[n].Values[i].Layers[f].Visibility,loopOn||currentMesh[t].name!="Arms4"&&currentMesh[t].name!="Arms5"||(currentMesh[t].isVisible=!1),loopOn&&(highBackOn&&(currentMesh[t].name.includes("BackHolder1")||currentMesh[t].name.includes("Arms4"))&&(currentMesh[t].isVisible=!1),highBackOn||currentMesh[t].name!="BackHolder2"&&currentMesh[t].name!="Arms5"||(currentMesh[t].isVisible=!1),highBackOn||currentMesh[t].name!="Arms4"||(currentMesh[t].isVisible=!0)))}else dataDB.Options[n].Values[i].Active=!1;if(dataDB.Options[n].Name.includes("Back"))for(i=0;i<dataDB.Options[n].Values.length;i++)dataDB.Options[n].Values[i].Active&&(backPartNumber[dataDB.Options[n].Depth-1]=dataDB.Options[n].Values[i].PartNumber)}}var Grade1_Link={Name:"Link",Content:[{Id:1,Name:"Eclipse",Code:"1001",Active:!0},{Id:2,Name:"Shadow",Code:"1002",Active:!1},{Id:3,Name:"Coast",Code:"1003",Active:!1},{Id:4,Name:"Kiwi",Code:"1004",Active:!1},{Id:5,Name:"Harvest",Code:"1005",Active:!1},{Id:6,Name:"Poppy",Code:"1006",Active:!1}]},Grade1_IOU={Name:"I.O.U.",Content:[{Id:1,Name:"Billy 4C",Code:"1301",Active:!1},{Id:2,Name:"Swammi",Code:"1302",Active:!1},{Id:3,Name:"Jetway",Code:"1303",Active:!1},{Id:4,Name:"Sea Bass",Code:"1304",Active:!1},{Id:5,Name:"Petey",Code:"1305",Active:!1},{Id:6,Name:"Triple Stamp",Code:"1306",Active:!1},{Id:7,Name:"Atomic Pepper",Code:"1307",Active:!1},{Id:8,Name:"Mock Yeah",Code:"1308",Active:!1},{Id:9,Name:"Sheepdog",Code:"1309",Active:!1},]},Grade1_Circus={Name:"Circus Boy Plastics",Content:[{Id:1,Name:"Cowtipping",Code:"01",Active:!1},{Id:2,Name:"Sugar Packet",Code:"02",Active:!1},{Id:3,Name:"Rhino",Code:"03",Active:!1},{Id:4,Name:"Dinghy",Code:"04",Active:!1},{Id:5,Name:"Pine Tree",Code:"05",Active:!1},{Id:6,Name:"Ketchup Popsicle",Code:"06",Active:!1},{Id:7,Name:"Bear Claw",Code:"07",Active:!1}]},GradeV_Vinyl={Name:"Vinyl",Content:[{Id:1,Name:"Black",Code:"4001",Active:!1},{Id:2,Name:"Grey",Code:"4002",Active:!1},{Id:3,Name:"White",Code:"4003",Active:!1},]},Grade2_Foundation_10={Name:"Foundation 10",Content:[{Id:1,Name:"Blue Mist",Code:"2024",Active:!1},{Id:2,Name:"Capri",Code:"2044",Active:!1},{Id:3,Name:"Celery",Code:"2013",Active:!1},{Id:4,Name:"Mercury",Code:"2016",Active:!1},{Id:5,Name:"Merlot",Code:"2008",Active:!1},{Id:6,Name:"Mocha",Code:"2030",Active:!1},{Id:7,Name:"Ochre",Code:"2032",Active:!1},{Id:8,Name:"Parade Blue",Code:"2034",Active:!1},{Id:9,Name:"Poppy",Code:"2041",Active:!1},{Id:10,Name:"Terra Cotta",Code:"2019",Active:!1},]},Grade2_Key_Largo={Name:"Key Largo",Content:[{Id:1,Name:"Aegean",Code:"2114",Active:!1},{Id:2,Name:"Crimson",Code:"2101",Active:!1},{Id:3,Name:"Ebony",Code:"2116",Active:!1},{Id:4,Name:"Graphite",Code:"2106",Active:!1},{Id:5,Name:"Jungle",Code:"2103",Active:!1},{Id:6,Name:"Pear",Code:"2133",Active:!1},{Id:7,Name:"Quarry",Code:"2126",Active:!1},{Id:8,Name:"Sandstone",Code:"2120",Active:!1},{Id:9,Name:"Tangerine",Code:"2109",Active:!1},{Id:10,Name:"Ultramarine",Code:"2104",Active:!1}]},Grade2_Patio={Name:"Patio",Content:[{Id:1,Name:"Aquatint",Code:"2224",Active:!1,ColorCode:"#FFFFFF"},{Id:2,Name:"Basket",Code:"2200",Active:!1,ColorCode:"#505050"},{Id:3,Name:"Coral Reef",Code:"2209",Active:!1},{Id:4,Name:"Oceanic",Code:"2204",Active:!1},{Id:5,Name:"Slate",Code:"2206",Active:!1},{Id:6,Name:"Sunshine",Code:"2202",Active:!1},{Id:7,Name:"Vellum",Code:"2207",Active:!1}]},Grade3_Habersash={Name:"Habersash",Content:[{Id:1,Name:"Basil",Code:"3003",Active:!1},{Id:2,Name:"Charcoal",Code:"3006",Active:!1},{Id:3,Name:"Curry",Code:"3009",Active:!1},{Id:4,Name:"Denim",Code:"3004",Active:!1},{Id:5,Name:"Earth",Code:"3010",Active:!1},{Id:6,Name:"Emerald",Code:"3013",Active:!1},{Id:7,Name:"Plum",Code:"3008",Active:!1},{Id:8,Name:"Raspberry",Code:"3001",Active:!1},{Id:9,Name:"Shadow",Code:"3016",Active:!1},{Id:10,Name:"Teal",Code:"3014",Active:!1},]},Grade3_Echo={Name:"Habersash",Content:[{Id:1,Name:"Apple Green",Code:"3113",Active:!1},{Id:2,Name:"Blaze",Code:"3109",Active:!1},{Id:3,Name:"Cerulean",Code:"3114",Active:!1},{Id:4,Name:"Greystone",Code:"3116",Active:!1},{Id:5,Name:"Skylight",Code:"3124",Active:!1},{Id:6,Name:"Smokey Taupe",Code:"3110",Active:!1},{Id:7,Name:"Vermillion",Code:"3101",Active:!1},]},Grade3_Cosmopolitan={Name:"Cosmopolitan",Content:[{Id:1,Name:"Denim",Code:"3204",Active:!1},{Id:2,Name:"Granite",Code:"3210",Active:!1},{Id:3,Name:"Horizon",Code:"3214",Active:!1},{Id:4,Name:"Marigold",Code:"3202",Active:!1},{Id:5,Name:"Mist",Code:"3216",Active:!1},{Id:6,Name:"Oatmeal",Code:"3217",Active:!1},{Id:7,Name:"Opal",Code:"3203",Active:!1},{Id:8,Name:"Saffron",Code:"3219",Active:!1},{Id:9,Name:"Shiitake",Code:"3200",Active:!1},{Id:10,Name:"Tangerine",Code:"3209",Active:!1},]},Empty_Grade={Name:"TBD",Content:[{Id:1,Name:"TBD",Code:"0000",Active:!0}]},canvas=document.getElementById("wyattCanvas"),container=document.getElementById("wyattContainer"),loopOn=!1,highBackOn=!1,feature="",option="",collection="",materialSet="",backPartNumber=[" "],baseUrl,asyncMesh,currentMesh,productName,optionsMenu,$accordion,nOptions,$card,cardName,$cardHeader,$dropdownarrow,$cardButton,$accordionInfoContainer,$accordionInfo,$rowDivider,$backWrapper,$backFeature,$backFeatureTitle,$materialItem,$materialImage,$listGroup,nValues,selectedOption,nonSelectedOption,$featureOptions,dataDB;dataDB.Name.includes("Freeride")&&(backPartNumber=["B","M","G"]);dataDB.Name.includes("Rowsell")&&(backPartNumber=["B","G","M",""]);var modelNumberOfOptions=dataDB.Options.length,engine=new BABYLON.Engine(canvas,!0,{premultipliedAlpha:!1,preserveDrawingBuffer:!0,stencil:!0}),scene=new BABYLON.Scene(engine),camera=new BABYLON.ArcRotateCamera("Camera",0,0,0,new BABYLON.Vector3(0,0,0),scene),photoCamera,photoCameraB;camera.setTarget(BABYLON.Vector3.Zero());scene.clearColor=new BABYLON.Color3(1,1,1);var maxSize=new BABYLON.Vector3(0,0,0),meshCenter=new BABYLON.Vector3(0,0,0),createScene=function(){return BABYLON.GLTFFileLoader.IncrementalLoading=!1,baseUrl="/assets/models/",lowFile=dataDB.LowFile,BABYLON.SceneLoader.ImportMesh("",baseUrl,lowFile,scene,function(n){var f,t,i,e,r,u;for(scene.createDefaultCameraOrLight(!0,!0,!0),scene.activeCamera.panningSensibility=10,scene.activeCamera.wheelPrecision=.25,photoCamera=scene.activeCamera.clone(),photoCameraB=photoCamera.clone(),photoCameraB.alpha=Math.PI/3+Math.PI,scene.lights[0].dispose(),f=new BABYLON.HemisphericLight("light1",new BABYLON.Vector3(0,10,0),scene),f.intensity=.1,t=1;t<n.length;t++)n[t].actionManager=new BABYLON.ActionManager(scene),n[t].actionManager.registerAction(new BABYLON.ExecuteCodeAction(BABYLON.ActionManager.OnPointerOverTrigger,function(){},!1)),n[t].material&&n[t].material.bumpTexture&&(n[t].material.bumpTexture.level=1.5),n[t].position=new BABYLON.Vector3(0,0,0),i=n[t].getBoundingInfo().boundingBox.maximumWorld,i.x>maxSize.x&&(maxSize.x=i.x),i.y>maxSize.y&&(maxSize.y=i.y),i.z>maxSize.z&&(maxSize.z=i.z),meshCenter.x+=n[t].getBoundingInfo().boundingBox.centerWorld.x,meshCenter.y+=n[t].getBoundingInfo().boundingBox.centerWorld.y,meshCenter.z+=n[t].getBoundingInfo().boundingBox.centerWorld.z,n[t].isVisible=dataDB.DefaultLayers.includes(n[t].name);meshCenter.x=meshCenter.x/n.length*0;meshCenter.y=meshCenter.y/n.length;meshCenter.z=meshCenter.z/n.length;scene.activeCamera.setTarget(meshCenter);e=engine.getAspectRatio(camera);r=(maxSize.y+maxSize.x+maxSize.z)/3;scene.activeCamera.lowerRadiusLimit=r;scene.activeCamera.upperRadiusLimit=r*4;scene.activeCamera.alpha=Math.PI/2.4;scene.activeCamera.beta=7*Math.PI/16;photoCamera=scene.activeCamera.clone();u=new BABYLON.CubeTexture.CreateFromPrefilteredData("assets/environment/tokyo.dds",scene);u.gammaStapce=!0;scene.environmentTexture=u;currentMesh=n;detectmob()||(dataDB.MedFile&&asyncDownload(dataDB.MedFile),dataDB.HighFile&&asyncDownload(dataDB.HighFile))},function(n){if(n.lengthComputable){var t=(n.loaded*100/n.total).toFixed();$(".progress-bar").css("width",t+"%");$(".progress-bar").text(t+"%");t==100&&$("#LoadingScreen").fadeOut(2e3)}else dlCount=n.loaded/1048576},function(){}),scene},scene=createScene();engine.runRenderLoop(function(){window.addEventListener("resize",function(){engine.resize()});scene.render()});productName=document.getElementById("productName");productName.textContent=dataDB.Name;var totalPrice=dataDB.Price,currentOptionPrice=Array(dataDB.Options.length),productPrice=document.getElementById("productPrice"),currentOptionsPDF=null;for(priceCalculation(),optionsMenu=document.getElementById("optionsMenu"),$accordion=$("<div>",{"class":"accordion",id:"wyattAccordion"}),$("#optionsMenu").append($accordion),nOptions=0;nOptions<dataDB.Options.length;nOptions++){if($card=$("<div>",{"class":"card"}),$accordion.append($card),cardName=dataDB.Options[nOptions].Code,$cardHeader=$("<div>",{"class":"class-header",id:cardName+"Header"}),$card.append($cardHeader),$dropdownarrow=$("<span class=dropdown-menu-arrow><\/span>"),$cardHeader.append($dropdownarrow),$cardButton=$("<div>",{"class":"btn btn-link",type:"button","data-toggle":"collapse","data-target":"#"+cardName,"aria-expanded":"true","aria-controls":cardName,text:cardName,id:cardName+"Name"}),$cardHeader.append($cardButton),$accordionInfoContainer=$("<div>",{id:cardName,"class":"collapse","aria-labelledby":cardName+"Header","data-parent":"#wyattAccordion",heightStyle:"content"}),$card.append($accordionInfoContainer),$accordionInfo=$("<div>",{"class":"card-body"}),$accordionInfoContainer.append($accordionInfo),$rowDivider=$("<div>",{"class":"row no-gutter",id:cardName+"-row"}),$accordionInfo.append($rowDivider),cardName==="back"&&($backWrapper=$("<div>",{id:"backWrapper",style:"width:100%,"}),$rowDivider.append($backWrapper)),cardName.includes("back"))if($cardButton.text(dataDB.Options[nOptions].Name),cardName.includes("color"))for($backFeature=$("<div>",{id:"backFeatureWrapper-"+cardName,style:"margin: 0 1%; width: 100%; display: flow-root"}),$backWrapper.append($backFeature),$backFeatureTitle=$("<h5>",{id:"backFeatureTitle-"+cardName,text:dataDB.Options[nOptions].Description,style:"text-align: center; margin: 1% 0;font-weight: bold;"}),$backFeature.append($backFeatureTitle),nValues=0;nValues<dataDB.Options[nOptions].Values.length;nValues++)$materialItem=$("<div>",{"class":"material-item",id:dataDB.Options[nOptions].Values[nValues].Code+"-back-material",onClick:'changeMaterial("back,'+dataDB.Options[nOptions].Values[nValues].Code+",none,"+nOptions+",null,"+dataDB.Options[nOptions].Values[nValues].PartNumber+'")',style:"float: left; margin: 2% 1%; width:"+90/4+"%;"}),$backFeature.append($materialItem),$materialImage=$("<img>",{src:"assets/layout/material thumbnails/"+dataDB.Name+"/"+dataDB.Options[nOptions].Name+"/"+dataDB.Options[nOptions].Values[nValues].Code+".jpg",style:"width: 90%"}),$materialItem.append($materialImage),dataDB.Options[nOptions].Values[nValues].Show||$materialItem.hide();else for(dataDB.Options[nOptions].Code=="back-headrest"?($backFeature=$("<div>",{id:"backFeatureWrapper-"+cardName,style:"float: left; margin: 0 1%; width: 96%"}),$backWrapper.append($backFeature)):($backFeature=$("<div>",{id:"backFeatureWrapper-"+cardName,style:"float: left; margin: 0 1%; width:"+(100-2*dataDB.BackSize)/dataDB.BackSize+"%"}),$backWrapper.append($backFeature)),$backFeatureTitle=$("<h5>",{id:"backFeatureTitle-"+cardName,text:dataDB.Options[nOptions].Description,style:"text-align: center; margin: 1% 0; font-weight: bold;"}),$backFeature.append($backFeatureTitle),$listGroup=$("<div>",{"class":"list-group list-group-flush",id:"listTab",role:"tablist"}),$backFeature.append($listGroup),nValues=0;nValues<dataDB.Options[nOptions].Values.length;nValues++)dataDB.Options[nOptions].Values[nValues].Active?(selectedOption=dataDB.Options[nOptions].Values[nValues].Name,$featureOptions=$("<a>",{"class":"list-group-item list-group-item-action active",id:"list-"+selectedOption+"-list","data-toggle":"list",href:"#list-"+selectedOption,role:"tab","aria-controls":selectedOption,onClick:'optionChangedOnFeature("'+dataDB.Options[nOptions].Name+","+selectedOption+'")',text:selectedOption}),selectedOption.includes("Backk")&&$featureOptions.text(selectedOption.replace("Backk","")),selectedOption.includes("Frame")&&$featureOptions.text(selectedOption.replace("Frame","")),selectedOption.includes("V2")&&$featureOptions.text(selectedOption.replace("V2",""))):(nonSelectedOption=dataDB.Options[nOptions].Values[nValues].Name,$featureOptions=$("<a>",{"class":"list-group-item list-group-item-action",id:"list-"+nonSelectedOption+"-list","data-toggle":"list",href:"#list-"+nonSelectedOption,role:"tab","aria-controls":nonSelectedOption,onClick:'optionChangedOnFeature("'+dataDB.Options[nOptions].Name+","+nonSelectedOption+'")',text:nonSelectedOption}),dataDB.Options[nOptions].Values[nValues].Show||$featureOptions.hide(),nonSelectedOption.includes("Backk")&&$featureOptions.text(nonSelectedOption.replace("Backk","")),nonSelectedOption.includes("Frame")&&$featureOptions.text(nonSelectedOption.replace("Frame","")),nonSelectedOption.includes("V2")&&$featureOptions.text(nonSelectedOption.replace("V2",""))),(selectedOption=="HighbackVin"||nonSelectedOption=="HighbackVin")&&$featureOptions.text("Vinyl"),$listGroup.append($featureOptions),nValues>0&&$.inArray(dataDB.Options[nOptions].Values[nValues-1].Name,dataDB.Options[nOptions].Values[nValues].Uses);if(cardName.includes("back-"))$("#"+cardName+"Header").parent().remove();else if(cardName.includes("grade")||cardName.includes("back")){if(cardName.includes("grade")){var $baseRow=$("<div>",{"class":"row no-gutter",id:"gradesBaseRow"}),$baseFilterRow=$("<div>",{"class":"row no-gutter",id:"gradesFilterRow"}),$dropdownColGrades=$("<div>",{"class":"col",id:"dropdownColGrades"}),$dropdownColMats=$("<div>",{"class":"col",id:"dropdownColMats"}),$imagesContainer=$("<div>",{"class":"row no-gutter",id:"imagesContainer"});$rowDivider.append($baseFilterRow);$rowDivider.append($baseRow);$baseFilterRow.append($dropdownColGrades);$baseFilterRow.append($dropdownColMats);$baseRow.append($imagesContainer);materialStructureBuilding(nOptions);$cardButton.text(dataDB.Options[nOptions].Name)}}else for($listGroup=$("<div>",{"class":"list-group list-group-flush",id:"listTab",role:"tablist"}),$rowDivider.append($listGroup),nValues=0;nValues<dataDB.Options[nOptions].Values.length;nValues++)dataDB.Options[nOptions].Values[nValues].Active?(selectedOption=dataDB.Options[nOptions].Values[nValues].Name,$featureOptions=$("<a>",{"class":"list-group-item list-group-item-action active",id:"list-"+selectedOption+"-list","data-toggle":"list",href:"#list-"+selectedOption,role:"tab","aria-controls":selectedOption,onClick:'optionChangedOnFeature("'+dataDB.Options[nOptions].Name+","+selectedOption+'")',text:selectedOption}),$cardButton.text(dataDB.Options[nOptions].Name)):(nonSelectedOption=dataDB.Options[nOptions].Values[nValues].Name,$featureOptions=$("<a>",{"class":"list-group-item list-group-item-action",id:"list-"+nonSelectedOption+"-list","data-toggle":"list",href:"#list-"+nonSelectedOption,role:"tab","aria-controls":nonSelectedOption,onClick:'optionChangedOnFeature("'+dataDB.Options[nOptions].Name+","+nonSelectedOption+'")',text:nonSelectedOption}),$cardButton.text(dataDB.Options[nOptions].Name)),$listGroup.append($featureOptions)}(function(n){var t={items:{},container:null,totalPages:1,perPage:3,currentPage:0,createNavigation:function(){var i,t,r,f,u;for(this.totalPages=Math.ceil(this.items.length/this.perPage),n(".pagination",this.container.parent()).remove(),i=n('<div class="pagination"><\/div>').append('<a class="nav prev disabled" data-next="false"><<\/a>'),t=0;t<this.totalPages;t++)r="page",t||(r="page current"),f='<a class="'+r+'" data-page="'+(t+1)+'">'+(t+1)+"<\/a>",i.append(f);i.append('<a class="nav next" data-next="true">><\/a>');this.container.after(i);u=this;n("body").off("click",".nav");this.navigator=n("body").on("click",".nav",function(){var t=n(this);u.navigate(t.data("next"))});n("body").off("click",".page");this.pageNavigator=n("body").on("click",".page",function(){var t=n(this);u.goToPage(t.data("page"))})},navigate:function(t){(isNaN(t)||t===undefined)&&(t=!0);n(".pagination .nav").removeClass("disabled");t?(this.currentPage++,this.currentPage>this.totalPages-1&&(this.currentPage=this.totalPages-1),this.currentPage==this.totalPages-1&&n(".pagination .nav.next").addClass("disabled")):(this.currentPage--,this.currentPage<0&&(this.currentPage=0),this.currentPage==0&&n(".pagination .nav.prev").addClass("disabled"));this.showItems()},updateNavigation:function(){var t=n(".pagination .page");t.removeClass("current");n('.pagination .page[data-page="'+(this.currentPage+1)+'"]').addClass("current")},goToPage:function(t){this.currentPage=t-1;n(".pagination .nav").removeClass("disabled");this.currentPage==this.totalPages-1&&n(".pagination .nav.next").addClass("disabled");this.currentPage==0&&n(".pagination .nav.prev").addClass("disabled");this.showItems()},showItems:function(){this.items.hide();var n=this.perPage*this.currentPage;this.items.slice(n,n+this.perPage).show();this.updateNavigation()},init:function(n,t,i){this.container=n;this.currentPage=0;this.totalPages=1;this.perPage=i;this.items=t;this.createNavigation();this.showItems()}};n.fn.pagify=function(i,r){var u=n(this),f=n(r,u);if((isNaN(i)||i===undefined)&&(i=3),f.length<=i)return!0;t.init(u,f,i)}})(jQuery);$("#imagesContainer").pagify(6,".material-item");let selectedChair=sessionStorage.getItem("chair");console.log(selectedChair);switch(selectedChair){case"G6":dataDB=getG6;$("#stoolSwap").click(function(){sessionStorage.clear();sessionStorage.setItem("chair","G6Stool");location.reload()});break;case"G6Stool":dataDB=getG6Stool;$("#standardSwap").click(function(){sessionStorage.clear();sessionStorage.setItem("chair","G6");location.reload()});break;case"Freeride":dataDB=getFreeride;$("#stoolSwap").click(function(){sessionStorage.clear();sessionStorage.setItem("chair","FreerideStool");location.reload()});break;case"FreerideStool":dataDB=getFreerideStool;$("#standardSwap").click(function(){sessionStorage.clear();sessionStorage.setItem("chair","Freeride");location.reload()});break;case"Roswell":dataDB=getRoswell;$("#stoolSwap").click(function(){sessionStorage.clear();sessionStorage.setItem("chair","RoswellStool");location.reload()});break;case"RoswellStool":dataDB=getRoswellStool;$("#standardSwap").click(function(){sessionStorage.clear();sessionStorage.setItem("chair","Roswell");location.reload()});break;case"Lamia":dataDB=getLamia;$("#stoolStandardSwap").css({visibility:"hidden",height:"1px"});break;case"Extra":dataDB=getExtra;$("#stoolStandardSwap").css({visibility:"hidden",height:"1px"});break;case"TetherStool":dataDB=getTether;$("#stoolStandardSwap").css({visibility:"hidden",height:"1px"});break;default:dataDB=getG6}